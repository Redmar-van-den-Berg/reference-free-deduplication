- name: integration-vanilla
  tags:
    - integration
  command: >
    snakemake
      --reason
      --printshellcmds
      --jobs 1
      --latency-wait 120
      --notemp
      --keep-incomplete
      --use-singularity --singularity-args ' --cleanenv --bind /tmp'
      --singularity-prefix '~/.singularity/cache/snakemake'
      --config pepfile=tests/pep/samples.csv
      --snakefile Snakefile
  files:
    # Expected outpu files for HUMID
    - path: sample1/humid/forward_dedup.fastq.gz
    - path: sample1/humid/reverse_dedup.fastq.gz
    - path: sample1/humid/umi_dedup.fastq.gz
    - path: benchmarks/humid_sample1.tsv
      contains:
        - max_rss
    # Test output file for Calib
    - path: sample1/calib/cluster
    - path: benchmarks/calib_sample1.tsv
